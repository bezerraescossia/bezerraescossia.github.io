<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <h3>Modelagem de Dados</h3> <h4>Estudo de caso — realizando a modelagem de banco de dados para uma livraria</h4> <h3>Contextualização</h3> <p>Nesse projeto, uma livraria deseja implementar um software que gerencia as vendas da empresa, e, para isso, foi proposto a utilização de um banco de dados relacional. Nosso papel dentro da equipe contratada para o desenvolvimento desse software é exatamente desenvolver o projeto de banco de dados.</p> <p>O projeto de modelagem de dados relacional passa essencialmente por três etapas: projeto conceitual, projeto lógico e projeto físico. De acordo com Prof. PhD. Clodoveu Davis em sua publicação pela Universidade Federal de Minas Gerais (anexo I), na modelagem conceitual de dados, a ênfase está na simplicidade e legibilidade. O objetivo da abordagem conceitual é capturar os requisitos do mundo real de uma forma simples e significativa que seja compreensível tanto para o projetista do banco de dados quanto para o usuário final.</p> <p>Já no projeto lógico, o objetivo é detalhar o projeto conceitual, aproximando-se mais da fase de implementação. Em outras palavras, é transformar o “mini-mundo” criado na fase conceitual para um modelo mais próximo da linguagem dos SGBDs (Sistema de Gerenciamento de Banco de Dados).</p> <p>Por fim, o projeto físico é de fato a implementação do banco de dados idealizado no projeto lógico para um ambiente SGBD.</p> <p>De uma forma geral, nos temos os seguintes <strong>inputs</strong> e <strong>outputs</strong> para cada fase do projeto:</p> <ul> <li>Projeto conceitual: mundo real → diagrama entidade-relacionamento (ER);</li> <li>Projeto lógico: diagrama ER → modelo relacional;</li> <li>Projeto físico: modelo relacional → modelo em SGBD.</li> </ul> <h3>Projeto Conceitual</h3> <p>Uma vez compreendida a ideia do diagrama ER, para sair do mundo real e chegar no mini-mundo do diagrama ER não há muito mistério. Durante essa fase, a grande habilidade do projetista está no entendimento do negócio e tradução para o diagrama. Para essa finalidade foi utilizado no projeto o software BrModelo.</p> <p>Após uma reunião com o cliente, objetivando a compreensão do completo funcionamento da livraria, assim como suas regras de negócio, algumas conclusões foram feitas.</p> <ul> <li>Os seguintes dados deverão ser coletados dos clientes: nome, telefone, endereço e email. Além desses, caso o cliente seja pessoa física será coletado o RG e CPF, e, caso seja pessoa jurídica, será coletado o CNPJ e IE;</li> <li>Os livros tem informações associadas: título, categoria, ISBN, ano de publicação, valor, editora e autores da obra;</li> <li>Os livros são fornecidos por editoras e é essencial que se tenha o nome da editora, nome do contato, email e no máximo 2 telefones.</li> <li>Um livro é exclusivo da editora, ou seja, não se pode ter o mesmo livro vindo de várias editoras;</li> <li>O cliente pode comprar um ou mais livros através de um pedido de compra. Mas sempre que ele faz uma compra precisa verificar-se se o livro existe em estoque.</li> </ul> <p>O diagrama abaixo é basicamente a transcrição gráfica das informações fornecidas pelo cliente durante a reunião.</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*6d1HZA4ch1r8fthLLG2_Xw.png"><figcaption>Figura 01 — Diagrama de entidade-relacionamento</figcaption></figure> <p>Eis algumas informações pontuais relevantes sobre o diagrama:</p> <ul> <li>Observe que a entidade CLIENTE possui uma implementação de generalização/especialização, ou seja, a entidade CLIENTE possui duas outras entidades: PESSOA FÍSICA e PESSOA JURÍDICA. Conforme solicitado pela livraria;</li> <li>Note que a relação entre PEDIDO e LIVRO é na verdade uma entidade associativa. Isso ocorre porque a relação entre eles dois é de n:m exigindo, dessa forma, uma entidade intermediária. Nesse contexto, perceba que um PEDIDO contém um ou vários ITENS, e, da mesma forma um LIVRO pode estar contido em um ou vários ITENS (perceba a intermediação feita pela entidade associativa ITENS);</li> <li>As entidades PEDIDOS, LIVRO e ESTOQUE são entidades fracas, uma vez que elas necessitam de outras entidades para existir. Note que não existiria ESTOQUE se LIVRO não existisse, e, da mesma forma, não existiria LIVROS sem EDITORAS. Olhando agora para a outra entidade fraca, um PEDIDO não seria possível sem um CLIENTE. Essas definições serão essenciais na abordagem relacional, principalmente na definição das chaves primárias e estrangeiras.</li> </ul> <h3>Projeto Lógico</h3> <p>As atividades realizadas no projeto lógico podem ser consideradas as mais “burocráticas”, uma vez que, várias regras são aplicadas na transformação do diagrama ER para o modelo relacional.</p> <p>Além disso, obtendo-se o modelo relacional, deve-se ainda testar o modelo sobre alguns paradigmas e caso necessário, normaliza-las. Começando pela ordem, primeiramente, deve-se realizar um mapeamento do diagrama ER, gerado no projeto conceitual, para um modelo relacional. Nesse contexto, será utilizado nesse projeto a abordagem sugerida pela Prof. Dr. Daniela Barreiro Claro (anexo 2). O modelo relacional foi realizado no próprio MySQL, mesmo SGBD da implementação, e como resultado temos:</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/862/1*TtsrdzqK31sQ8138Tr7nNQ.png"><figcaption>Figura 02 — Modelo Relacional do Banco de Dados</figcaption></figure> <p>Observações na transformação das entidades fortes:</p> <ul> <li>A entidade CLIENTE possui no diagrama ER uma implementação de generalização/especificação. Elas transformaram-se nas entidades fracas “pessoa_fisica” e “pessoa_juridica” no modelo relacional;</li> <li>O atributo composto “endereço” da entidade CLIENTE não aparece no modelo relacional, mas seus atributos descendentes sim;</li> <li>O atributo multivalorado da entidade EDITORA no diagrama ER tornou-se em uma nova entidade “contato_editora”.</li> <li>A linha contínua ou tracejada indica se aquela relação identifica ou não a entidade “filha”. Note que as entidades PEDIDO, LIVRO e ESTOQUE apesar de serem entidade fracas, possuem chaves primárias próprias que por si só as caracterizam.</li> </ul> <p>Uma vez obtido o modelo relacional, realiza-se as normalizações.</p> <ul> <li>Primeira forma normal: diz-se que uma tabela está na primeira forma normal quando ela não contém tabelas aninhadas;</li> <li>Segunda forma normal: uma tabela encontra-se na segunda forma normal quando, além de estar na 1FN, não contém dependências parciais;</li> <li>Terceira forma normal: uma tabela encontra-se na terceira forma normal quando além de estar na segunda forma, não contém dependências transitivas;</li> <li>Quarta forma normal: uma tabela encontra-se na quarta forma normal, quando, além de estar na 3FN, não contém dependências multivaloradas.</li> </ul> <p>Para se aprofundar no tema, recomendo a leitura do livro “projeto de banco de dados” do Prof. Dr. Carlos Alberto Heuser. Uma vez que seguimos corretamente todos os passos anteriores à normalização, nosso modelo relacional já se apresenta na quarta forma normal e já está pronto para implementação.</p> <h3>Projeto Físico</h3> <p>O SGBD escolhido foi o MySQL. Nele, o modelo relacional poderia ser importado diretamente, gerando automaticamente todas as tabelas e as regras de negócio associadas. Entretanto, como o objetivo dessa publicação é demonstrar também as <strong>skills</strong> em SQL, será realizado a inserção manual por linhas de código. Para facilitar a visualização do código, foi utilizado o MySQL workbench, entretanto seria também possível a inserção do código diretamente no terminal.</p> <p>Perceba que quando instancia-se um novo cliente na tabela deveria-se especificar um tipo, pessoa física ou pessoa jurídica. E com isso, adicionar as informações equivalentes ou na tabela pessoa_fisica ou na tabela pessoa_juridica. Entretanto, essas regras não serão implementadas diretamente no banco de dados, mas sim no software que utilizará o banco de dados. Portanto, nesse primeiro momento o projeto físico consiste apenas da criação das tabelas, sem utilização de <strong>triggers</strong> e <strong>procedures</strong>.</p> <iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/5daed89a3ef5a50657100ec8c2f005e1/href" rel="external nofollow noopener" target="_blank">https://medium.com/media/5daed89a3ef5a50657100ec8c2f005e1/href</a></iframe> <p>Além disso o cliente requisitou que deixa-se preparado já no SGBD algumas views que serão mais utilizadas como:</p> <ul> <li>Top 10 livros mais pedidos;</li> <li>Top 10 Clientes em compras;</li> <li>Livros em falta no estoque.</li> </ul> <iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/311a478e1dda011412a3905bd940e554/href" rel="external nofollow noopener" target="_blank">https://medium.com/media/311a478e1dda011412a3905bd940e554/href</a></iframe> <h3>Referências e anexos</h3> <ul> <li><a href="https://homepages.dcc.ufmg.br/~clodoveu/files/IBD/Aulas/IBD05e%20Projeto%20logico%20e%20mapeamento%20ER-relacional.pdf" rel="external nofollow noopener" target="_blank">Introdução a Banco de Dados SQL — Projeto Lógico e Mapeamento ER-Relacional</a></li> <li><a href="http://formas.ufba.br/dclaro/mata60/Quadro%20resumo%20-%20Mapeamento%20Relacional.pdf" rel="external nofollow noopener" target="_blank">Mapeamento ER para o modelo relacional</a></li> <li><a href="https://www.amazon.com.br/Projeto-Banco-Carlos-Alberto-Heuser/dp/8577803821" rel="external nofollow noopener" target="_blank">Projeto de Banco de Dados</a></li> </ul> <p><img src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=a9ddc362dd17" width="1" height="1" alt=""></p> </body></html>